{% set title = "Register" %}
{% extends "templates/base.njk" %}

{% block content %}
{# This webpage lets the user register and create their account with the vending machine app #}
<form action="/register" method="post">
    <div class="container">
      <h1>Register</h1>
      <p>Please fill in this form to create an account.</p>
      <hr>
      {# Allows user to enter email address, and password to create account #}
      <label for="email"><b>Email</b></label>
      <input type="text" placeholder="Enter Email" name="email" id="email" required>

      <label for="password"><b>Password</b></label>
      <input type="password" placeholder="Enter Password" name="password" id="password" required>

      <label for="psw-repeat"><b>Repeat Password</b></label>
      <input type="password" placeholder="Repeat Password" name="psw-repeat" id="psw-repeat" required>
      <p id="password-warning" class="hidden">These passwords don't match!</p>
      <hr>

      <p>By creating an account you agree to our <a href="#">Terms &amp; Privacy</a>.</p>
      <button type="submit" class="registerbtn">Register</button>
    </div>
    {# Users who already have an account can sign #}
    <div class="container signin">
      <p>Already have an account? <a href="/login">Sign in</a>.</p>
    </div>
  </form>
  <style>
    .hidden {
      display: none;
    }

    .shown {
      display: block;
    }
  </style>
  <script>
    // Very janky inline script but it'll do for now
    const fieldPass = document.getElementById("password");
    const fieldPassCheck = document.getElementById("psw-repeat");
    const warning = document.getElementById("password-warning");

    function checkPasswords() {
      const pass1 = fieldPass.value;
      const pass2 = fieldPassCheck.value;

      if(pass1 === pass2) {
        warning.className = "hidden";
      } else {
        warning.className = "shown";
      }
    }

    fieldPass.addEventListener("input", checkPasswords);
    fieldPassCheck.addEventListener("input", checkPasswords);
  </script>
{% endblock %}
